{% extends 'base2.html' %}

{% block title %} View Recipes {% endblock %}

{% block content %}


	{% if recipes != [] %}
		<h2> Hello, {{ session["name"] }}. We found the following recipes for you. </h2>
	
		   {% for recipe in recipes %}
		   <div class="container2"> 
		       <p><img src= {{ recipe['recipe_image'] }}></p>
		       <p><h3>{{ recipe['recipe_name'] }} </h3></p>
		       <form action="{{ recipe['recipe_blog_url'] }}">
    			<input type="submit" class="nutritionbutton" value="Nutrition Information" />
				</form>
				 <form action="{{ recipe['recipe_url'] }}">
    			<input type="submit" class="instructionbutton" value="Instructions" />
				</form>
		   	   <b><h6> Health Labels:</b>  
		            {% for label in recipe['labels'] %}
		   		      {{ label }} 
		     	    {% endfor %} </h6> 

		        <form action="/save-recipe" method="POST" class="saveForm">
		 			<h6></h6>
		        	
		   	    <button type="submit" class="submitButton" id="{{recipe['recipeid']}}" name='url' value='{{recipe['recipe_url']}}' data-tooltip="saved">Save Recipe</button>
		        </form> <hr> 	
		   </div>
		{% endfor %}
	{% else %}
	    <h2> Sorry, {{ session["name"] }}. No recipes found with those criteria. Try to narrow your search. </h2>
 	{% endif %}
	</ul>


 	<script src="https://code.jquery.com/jquery.js"></script> 

   		<script>
		"use strict";
		function showText(evt) {
			let text 
		}


		function changeColor(evt) {
			console.log('got inside changeColor')
			console.log(evt)
			let id = evt.currentTarget.id
		

			$(`#${id}`).addClass('colorChange')
		
		} 

		$(".submitButton").on("click", changeColor);

		
		function confirmation(result) {
			alert(result);
			
		}

		function saveRecipe(evt) {
			console.log('got inside saveRecipe')
			console.log(evt)
			evt.preventDefault();
			let id = evt.currentTarget["0"].id
			console.log(id)


			let savedRecipeUrl = {
				"url": $(`#${id}`).val()
			};
	

			$.post("/save-recipe", 
				savedRecipeUrl,
				confirmation);
		}

			

		 
		$(".saveForm").on("submit", saveRecipe);
			this.addClass('red')



		   </script>


{% endblock %}
